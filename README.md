# Flights by Country Assistant

Это веб-приложение, которое позволяет пользователям задавать вопросы о прибывающих рейсах в один из шести крупных аэропортов мира. Приложение использует FlightAPI.io для получения данных и LLM для генерации ответов на естественном языке.


## Архитектура

Приложение построено на основе следующих технологий:

- **Бэкенд:** **FastAPI** (Python) - за его высокую производительность, асинхронность и встроенную валидацию данных с помощью Pydantic.
- **Фронтенд:** Ванильный **HTML, CSS, JavaScript** - для простоты и отсутствия необходимости в сложных фреймворках для такого интерфейса.
- **LLM:** **Mistral 7B** через **OpenRouter.ai** - как эффективная и бесплатная модель для обработки запросов.
- **Развертывание:** **Docker** для контейнеризации и **Fly.io** для хостинга.


## Схема обработки запроса (Query Flow)

1.  Пользователь выбирает аэропорт и вводит вопрос на фронтенде.
2.  JavaScript отправляет `POST` запрос на эндпоинт `/api/ask` нашего FastAPI бэкенда.
3.  Бэкенд проверяет валидность кода аэропорта.
4.  Сервис `get_flight_data` проверяет наличие свежих данных в кэше.
    - Если данные в кэше есть и они не старше 10 минут, они возвращаются немедленно.
    - Если кэш пуст или устарел, отправляется запрос к **FlightAPI.io**. Полученные данные упрощаются и сохраняются в кэш.
5.  Данные о рейсах и вопрос пользователя форматируются в специальный промпт.
6.  Промпт отправляется в модель **Mistral 7B** через API **OpenRouter**.
7.  LLM генерирует ответ на основе предоставленных данных.
8.  Бэкенд отправляет полученный ответ обратно на фронтенд в формате JSON.
9.  JavaScript отображает ответ пользователю.

## Принятые решения и альтернативы

- **Почему FastAPI?** Альтернативой мог быть Flask. FastAPI был выбран из-за его скорости, нативной поддержки `asyncio` и строгой типизации с Pydantic, что уменьшает количество ошибок и упрощает разработку.
- **Почему OpenRouter?** Альтернативы — прямое использование API от OpenAI, Google или Hugging Face. OpenRouter был выбран, так как он предоставляет единый интерфейс к множеству моделей, включая бесплатные, что идеально для тестового проекта.
- **Почему Docker Compose?** Контейнеризация обеспечивает консистентность окружения между разработкой и продакшеном.
...